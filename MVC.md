## Основы паттерна MVC (Model-View-Controller)

---

### Что такое MVC?

* **MVC (Model-View-Controller):** 
    * Архитектурный паттерн для разделения приложения на три основных компонента.
* **Основные цели:**
    * Разделение ответственности
    * Упрощение поддержки и расширения кода
    * Улучшение читаемости и понимания кода

---

### Модель (Model)

* **Модель:** 
    * Представляет данные и бизнес-логику приложения.
    * Отвечает за взаимодействие с базой данных.
* **Основные функции:**
    * Хранение данных
    * Валидация данных
    * Обработка бизнес-логики

```ruby
class Product < ApplicationRecord
  validates :name, presence: true
  validates :price, numericality: { greater_than: 0 }
end
```

---

### Представление (View)

* **Представление:** 
    * Отвечает за отображение данных пользователю.
    * Использует шаблонизатор для генерации HTML.
* **Основные функции:**
    * Отображение данных
    * Форматирование данных
    * Взаимодействие с пользователем

```erb
<h1>Products</h1>
<ul>
  <% @products.each do |product| %>
    <li><%= product.name %> - <%= product.price %></li>
  <% end %>
</ul>
```

---

### Контроллер (Controller)

* **Контроллер:** 
    * Обрабатывает запросы пользователя и управляет логикой приложения.
    * Взаимодействует с моделью и представлением.
* **Основные функции:**
    * Обработка запросов
    * Вызов методов модели
    * Передача данных в представление

```ruby
class ProductsController < ApplicationController
  def index
    @products = Product.all
  end
end
```

---

### Поток данных в MVC

1. **Запрос пользователя:** 
    * Пользователь отправляет запрос (например, GET /products).
2. **Контроллер:** 
    * Контроллер обрабатывает запрос и вызывает соответствующий метод модели.
3. **Модель:** 
    * Модель извлекает данные из базы данных и возвращает их контроллеру.
4. **Контроллер:** 
    * Контроллер передает данные в представление.
5. **Представление:** 
    * Представление генерирует HTML и отправляет его пользователю.

---

### Преимущества MVC

* **Разделение ответственности:** 
    * Каждый компонент отвечает за свою часть приложения.
* **Упрощение поддержки:** 
    * Изменения в одной части не влияют на другие.
* **Улучшение читаемости:** 
    * Код становится более структурированным и понятным.
* **Повторное использование кода:** 
    * Модели и представления могут использоваться в разных частях приложения.

---

### Пример приложения

* **Модель (Product):**

```ruby
class Product < ApplicationRecord
  validates :name, presence: true
  validates :price, numericality: { greater_than: 0 }
end
```

* **Контроллер (ProductsController):**

```ruby
class ProductsController < ApplicationController
  def index
    @products = Product.all
  end
end
```

* **Представление (index.html.erb):**

```erb
<h1>Products</h1>
<ul>
  <% @products.each do |product| %>
    <li><%= product.name %> - <%= product.price %></li>
  <% end %>
</ul>
```

---

### Заключение

* **MVC – мощный паттерн:** 
    * Упрощает разработку и поддержку веб-приложений.
    * Разделяет ответственность между компонентами.
* **Основные компоненты:** 
    * Модель, представление, контроллер.

---

### Вопросы?

Спасибо за внимание!

---
