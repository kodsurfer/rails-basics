### –ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–∞ Ruby on Rails –∑–∞ 1 –¥–µ–Ω—å  

–ö–æ–≥–¥–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç–µ —Ä–∞–±–æ—Ç–∞—Ç—å —Å Ruby on Rails, –º–æ–∂–µ—Ç –Ω–∞–ø—É–≥–∞—Ç—å –∏–¥–µ—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. 
–ö–∞–∑–∞–ª–æ—Å—å, —á—Ç–æ —ç—Ç–æ —Ç—Ä–µ–±—É–µ—Ç —Å–æ—Ç–µ–Ω —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞ –∏ –Ω–µ–¥–µ–ª—å —Ä–∞–±–æ—Ç—ã. –ù–æ –ø–æ—Ç–æ–º –±—ã–ª –Ω–∞–π–¥–µ–Ω —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± —Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ –≤—Å–µ–≥–æ –∑–∞ –æ–¥–∏–Ω –¥–µ–Ω—å.  

–í —ç—Ç–æ–π –ª–µ–∫—Ü–∏–∏ –º—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º, –∫–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é, –≤—Ö–æ–¥, –≤—ã—Ö–æ–¥ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞ –≤ Rails —Å –Ω—É–ª—è. 
–≠—Ç–æ –±—É–¥–µ—Ç –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º –±—ã—Å—Ç—Ä–æ —Å–æ–∑–¥–∞—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω—É—é –∏ —É–¥–æ–±–Ω—É—é —Å–∏—Å—Ç–µ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.  

---

## üìå –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –∏ –º–∞—Ä—à—Ä—É—Ç—ã: –æ—Å–Ω–æ–≤–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è  

### –ß—Ç–æ —Ç–∞–∫–æ–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä?  
–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä ‚Äì —ç—Ç–æ –º–æ—Å—Ç –º–µ–∂–¥—É –º–æ–¥–µ–ª—å—é (–±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö) –∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ–º (–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è). –û–Ω –ø—Ä–∏–Ω–∏–º–∞–µ—Ç HTTP-–∑–∞–ø—Ä–æ—Å—ã, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏—Ö –∏ –ø–µ—Ä–µ–¥–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è.  

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ —Å–æ–∑–¥–∞–¥–∏–º –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä UsersController:  

class UsersController < ApplicationController
  def index
    @users = User.all
  end

  def show
    @user = User.find(params[:id])
  end
end  

–¢–µ–ø–µ—Ä—å –º–Ω–µ –Ω—É–∂–Ω–æ –±—ã–ª–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç—ã (config/routes.rb), —á—Ç–æ–±—ã –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –º–æ–≥ –ø—Ä–∏–Ω–∏–º–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã:  

Rails.application.routes.draw do
  resources :users
end  

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç—ã –º–æ–∂–Ω–æ –∫–æ–º–∞–Ω–¥–æ–π:  

rails routes  

–≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ URL-–∞–¥—Ä–µ—Å–∞ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.  

---

## üìå –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è (Views): –≤—ã–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é  

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –∏—Ö –ø—Ä–æ—Ñ–∏–ª–µ–π.  

### –§–∞–π–ª `index.html.erb` ‚Äì —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π  
<h2>–°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h2>
<ul>
  <% @users.each do |user| %>
    <li><%= link_to user.name, user_path(user) %></li>
  <% end %>
</ul>  

### –§–∞–π–ª `show.html.erb` ‚Äì –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è  
<h2><%= @user.name %></h2>
<p>Email: <%= @user.email %></p>  

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ —Å–∞–π—Ç —É–∂–µ –º–æ–≥ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –∏—Ö –¥–∞–Ω–Ω—ã–µ!  

---

## üìå –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è: –¥–æ–±–∞–≤–ª—è–µ–º —Å–∏—Å—Ç–µ–º—É –≤—Ö–æ–¥–∞ –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏  

–ë–µ–∑ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ª—é–±–æ–π —á–µ–ª–æ–≤–µ–∫ –º–æ–≥ –±—ã –∑–∞–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É –∏ –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º –¥–∞–Ω–Ω—ã–º. –ß—Ç–æ–±—ã —ç—Ç–æ–≥–æ –Ω–µ —Å–ª—É—á–∏–ª–æ—Å—å, –±—ã–ª–æ —Ä–µ—à–∏–µ–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Devise ‚Äì –≥–æ—Ç–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤ Rails.  

### –ö–∞–∫ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Devise?  
bundle add devise
rails generate devise:install  

–ó–∞—Ç–µ–º —Å–æ–∑–¥–∞–¥–∏–º –º–æ–¥–µ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:  

rails generate devise User
rails db:migrate  

Devise –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–∏–ª –≤—Å–µ –Ω—É–∂–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã –∏ –º–µ—Ç–æ–¥—ã, —á—Ç–æ —Å—ç–∫–æ–Ω–æ–º–∏–ª–æ –º–Ω–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —á–∞—Å–æ–≤ —Ä–∞–±–æ—Ç—ã. –¢–µ–ø–µ—Ä—å –≤ —Å–∏—Å—Ç–µ–º–µ –±—ã–ª–∞ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –≤—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.  

---

## üìå –î–æ–±–∞–≤–ª—è–µ–º —Å—Å—ã–ª–∫–∏ –Ω–∞ –ª–æ–≥–∏–Ω, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –∏ –≤—ã—Ö–æ–¥  

–î–æ–±–∞–≤–∏–º –≤ —à–∞–ø–∫—É —Å–∞–π—Ç–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Å—ã–ª–∫–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:  

<nav>
  <% if user_signed_in? %>
    <p>–ü—Ä–∏–≤–µ—Ç, <%= current_user.email %>!</p>
    <%= link_to '–í—ã–π—Ç–∏', destroy_user_session_path, method: :delete %>
  <% else %>
    <%= link_to '–í–æ–π—Ç–∏', new_user_session_path %> |
    <%= link_to '–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è', new_user_registration_path %>
  <% end %>
</nav>  

–¢–µ–ø–µ—Ä—å, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω, –æ–Ω –≤–∏–¥–∏—Ç —Å–≤–æ–µ –∏–º—è –∏ –∫–Ω–æ–ø–∫—É –≤—ã—Ö–æ–¥–∞. –ï—Å–ª–∏ –Ω–µ—Ç ‚Äì –µ–º—É –ø—Ä–µ–¥–ª–∞–≥–∞—é—Ç—Å—è —Å—Å—ã–ª–∫–∏ –Ω–∞ –≤—Ö–æ–¥ –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é.  

---

## üìå –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è: –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞  

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å—Ç–∞–ª–æ –ø–æ–Ω—è—Ç–Ω–æ, —á—Ç–æ –ª—é–±–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–≥ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –¥—Ä—É–≥–∏—Ö. –≠—Ç–æ –±—ã–ª–∞ —Å–µ—Ä—å–µ–∑–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.  

–ß—Ç–æ–±—ã –µ–µ —Ä–µ—à–∏—Ç—å, –¥–æ–±–∞–≤–∏–º CanCanCan ‚Äì –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞.  

### –ö–∞–∫ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å CanCanCan?  
bundle add cancancan
rails generate cancan:ability  

–ó–∞—Ç–µ–º –æ–ø–∏—à–µ–º —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –≤ app/models/ability.rb:  

class Ability
  include CanCan::Ability

  def initialize(user)
    return unless user.present?

    if user.admin?
      can :manage, :all
    else
      can :read, User
      can :update, User, id: user.id
    end
  end
end  

–¢–µ–ø–µ—Ä—å:  
‚úÖ –ê–¥–º–∏–Ω –º–æ–∂–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å –≤—Å–µ–º  
‚úÖ –û–±—ã—á–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å  

–ß—Ç–æ–±—ã –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å —ç—Ç—É –∑–∞—â–∏—Ç—É, –¥–æ–±–∞–≤–∏–º –≤ UsersController:  

class UsersController < ApplicationController
  load_and_authorize_resource
end  

–¢–µ–ø–µ—Ä—å –Ω–∏–∫—Ç–æ –Ω–µ –º–æ–≥ –∏–∑–º–µ–Ω—è—Ç—å —á—É–∂–∏–µ –¥–∞–Ω–Ω—ã–µ ‚Äì —Å–∏—Å—Ç–µ–º–∞ —Å—Ç–∞–ª–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ–π.  

---
